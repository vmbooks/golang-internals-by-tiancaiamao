!function(){var u,l,e,t,c,d,p,f,m,y,v,g,S,w,x,k,b,E,_,F,O,P,N,T,o,$=function(e){var t=new $.Index;return t.pipeline.add($.trimmer,$.stopWordFilter,$.stemmer),e&&e.call(t,t),t};$.version="0.5.12",$.utils={},$.utils.warn=(o=this,function(e){o.console&&console.warn&&console.warn(e)}),$.EventEmitter=function(){this.events={}},$.EventEmitter.prototype.addListener=function(){var e=Array.prototype.slice.call(arguments),t=e.pop(),e=e;if("function"!=typeof t)throw new TypeError("last argument must be a function");e.forEach(function(e){this.hasHandler(e)||(this.events[e]=[]),this.events[e].push(t)},this)},$.EventEmitter.prototype.removeListener=function(e,t){this.hasHandler(e)&&(t=this.events[e].indexOf(t),this.events[e].splice(t,1),this.events[e].length||delete this.events[e])},$.EventEmitter.prototype.emit=function(e){var t;this.hasHandler(e)&&(t=Array.prototype.slice.call(arguments,1),this.events[e].forEach(function(e){e.apply(void 0,t)}))},$.EventEmitter.prototype.hasHandler=function(e){return e in this.events},$.tokenizer=function(e){return arguments.length&&null!=e&&null!=e?Array.isArray(e)?e.map(function(e){return e.toLowerCase()}):e.toString().trim().toLowerCase().split(/[\s\-]+/):[]},$.Pipeline=function(){this._stack=[]},$.Pipeline.registeredFunctions={},$.Pipeline.registerFunction=function(e,t){t in this.registeredFunctions&&$.utils.warn("Overwriting existing registered function: "+t),e.label=t,$.Pipeline.registeredFunctions[e.label]=e},$.Pipeline.warnIfFunctionNotRegistered=function(e){e.label&&e.label in this.registeredFunctions||$.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},$.Pipeline.load=function(e){var o=new $.Pipeline;return e.forEach(function(e){var t=$.Pipeline.registeredFunctions[e];if(!t)throw new Error("Cannot load un-registered function: "+e);o.add(t)}),o},$.Pipeline.prototype.add=function(){Array.prototype.slice.call(arguments).forEach(function(e){$.Pipeline.warnIfFunctionNotRegistered(e),this._stack.push(e)},this)},$.Pipeline.prototype.after=function(e,t){$.Pipeline.warnIfFunctionNotRegistered(t);e=this._stack.indexOf(e);if(-1==e)throw new Error("Cannot find existingFn");e+=1,this._stack.splice(e,0,t)},$.Pipeline.prototype.before=function(e,t){$.Pipeline.warnIfFunctionNotRegistered(t);e=this._stack.indexOf(e);if(-1==e)throw new Error("Cannot find existingFn");this._stack.splice(e,0,t)},$.Pipeline.prototype.remove=function(e){e=this._stack.indexOf(e);-1!=e&&this._stack.splice(e,1)},$.Pipeline.prototype.run=function(e){for(var t=[],o=e.length,n=this._stack.length,i=0;i<o;i++){for(var r=e[i],s=0;s<n&&void 0!==(r=this._stack[s](r,i,e));s++);void 0!==r&&t.push(r)}return t},$.Pipeline.prototype.reset=function(){this._stack=[]},$.Pipeline.prototype.toJSON=function(){return this._stack.map(function(e){return $.Pipeline.warnIfFunctionNotRegistered(e),e.label})},$.Vector=function(){this._magnitude=null,this.list=void 0,this.length=0},$.Vector.Node=function(e,t,o){this.idx=e,this.val=t,this.next=o},$.Vector.prototype.insert=function(e,t){this._magnitude=void 0;var o=this.list;if(!o)return this.list=new $.Vector.Node(e,t,o),this.length++;if(e<o.idx)return this.list=new $.Vector.Node(e,t,o),this.length++;for(var n=o,i=o.next;null!=i;){if(e<i.idx)return n.next=new $.Vector.Node(e,t,i),this.length++;i=(n=i).next}return n.next=new $.Vector.Node(e,t,i),this.length++},$.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e,t=this.list,o=0;t;)o+=(e=t.val)*e,t=t.next;return this._magnitude=Math.sqrt(o)},$.Vector.prototype.dot=function(e){for(var t=this.list,o=e.list,n=0;t&&o;)t.idx<o.idx?t=t.next:o=(t.idx>o.idx||(n+=t.val*o.val,t=t.next),o.next);return n},$.Vector.prototype.similarity=function(e){return this.dot(e)/(this.magnitude()*e.magnitude())},$.SortedSet=function(){this.length=0,this.elements=[]},$.SortedSet.load=function(e){var t=new this;return t.elements=e,t.length=e.length,t},$.SortedSet.prototype.add=function(){for(var e,t=0;t<arguments.length;t++)e=arguments[t],~this.indexOf(e)||this.elements.splice(this.locationFor(e),0,e);this.length=this.elements.length},$.SortedSet.prototype.toArray=function(){return this.elements.slice()},$.SortedSet.prototype.map=function(e,t){return this.elements.map(e,t)},$.SortedSet.prototype.forEach=function(e,t){return this.elements.forEach(e,t)},$.SortedSet.prototype.indexOf=function(e){for(var t=0,o=this.elements.length,n=o-t,i=t+Math.floor(n/2),r=this.elements[i];1<n;){if(r===e)return i;r<e&&(t=i),e<r&&(o=i),n=o-t,i=t+Math.floor(n/2),r=this.elements[i]}return r===e?i:-1},$.SortedSet.prototype.locationFor=function(e){for(var t=0,o=this.elements.length,n=o-t,i=t+Math.floor(n/2),r=this.elements[i];1<n;)r<e&&(t=i),e<r&&(o=i),n=o-t,i=t+Math.floor(n/2),r=this.elements[i];return e<r?i:r<e?i+1:void 0},$.SortedSet.prototype.intersect=function(e){for(var t=new $.SortedSet,o=0,n=0,i=this.length,r=e.length,s=this.elements,a=e.elements;!(i-1<o||r-1<n);)s[o]!==a[n]?s[o]<a[n]?o++:s[o]>a[n]&&n++:(t.add(s[o]),o++,n++);return t},$.SortedSet.prototype.clone=function(){var e=new $.SortedSet;return e.elements=this.toArray(),e.length=e.elements.length,e},$.SortedSet.prototype.union=function(e){var e=this.length>=e.length?(t=this,e):(t=e,this),t=t.clone();return t.add.apply(t,e.toArray()),t},$.SortedSet.prototype.toJSON=function(){return this.toArray()},$.Index=function(){this._fields=[],this._ref="id",this.pipeline=new $.Pipeline,this.documentStore=new $.Store,this.tokenStore=new $.TokenStore,this.corpusTokens=new $.SortedSet,this.eventEmitter=new $.EventEmitter,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},$.Index.prototype.on=function(){var e=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,e)},$.Index.prototype.off=function(e,t){return this.eventEmitter.removeListener(e,t)},$.Index.load=function(e){e.version!==$.version&&$.utils.warn("version mismatch: current "+$.version+" importing "+e.version);var t=new this;return t._fields=e.fields,t._ref=e.ref,t.documentStore=$.Store.load(e.documentStore),t.tokenStore=$.TokenStore.load(e.tokenStore),t.corpusTokens=$.SortedSet.load(e.corpusTokens),t.pipeline=$.Pipeline.load(e.pipeline),t},$.Index.prototype.field=function(e,t){t={name:e,boost:(t=t||{}).boost||1};return this._fields.push(t),this},$.Index.prototype.ref=function(e){return this._ref=e,this},$.Index.prototype.add=function(o,e){var n={},i=new $.SortedSet,t=o[this._ref],e=void 0===e||e;this._fields.forEach(function(e){var t=this.pipeline.run($.tokenizer(o[e.name]));n[e.name]=t,$.SortedSet.prototype.add.apply(i,t)},this),this.documentStore.set(t,i),$.SortedSet.prototype.add.apply(this.corpusTokens,i.toArray());for(var r=0;r<i.length;r++){var s=i.elements[r],a=this._fields.reduce(function(e,t){var o=n[t.name].length;return o?e+n[t.name].filter(function(e){return e===s}).length/o*t.boost:e},0);this.tokenStore.add(s,{ref:t,tf:a})}e&&this.eventEmitter.emit("add",o,this)},$.Index.prototype.remove=function(e,t){var o,n=e[this._ref],t=void 0===t||t;this.documentStore.has(n)&&(o=this.documentStore.get(n),this.documentStore.remove(n),o.forEach(function(e){this.tokenStore.remove(e,n)},this),t&&this.eventEmitter.emit("remove",e,this))},$.Index.prototype.update=function(e,t){t=void 0===t||t;this.remove(e,!1),this.add(e,!1),t&&this.eventEmitter.emit("update",e,this)},$.Index.prototype.idf=function(e){var t="@"+e;if(Object.prototype.hasOwnProperty.call(this._idfCache,t))return this._idfCache[t];var o=this.tokenStore.count(e),e=1;return 0<o&&(e=1+Math.log(this.documentStore.length/o)),this._idfCache[t]=e},$.Index.prototype.search=function(e){var e=this.pipeline.run($.tokenizer(e)),l=new $.Vector,o=[],n=this._fields.reduce(function(e,t){return e+t.boost},0);return e.some(function(e){return this.tokenStore.has(e)},this)?(e.forEach(function(a,e,t){var h=1/t.length*this._fields.length*n,u=this,t=this.tokenStore.expand(a).reduce(function(e,t){var o,n=u.corpusTokens.indexOf(t),i=u.idf(t),r=1,s=new $.SortedSet;return t!==a&&(o=Math.max(3,t.length-a.length),r=1/Math.log(o)),-1<n&&l.insert(n,h*i*r),Object.keys(u.tokenStore.get(t)).forEach(function(e){s.add(e)}),e.union(s)},new $.SortedSet);o.push(t)},this),o.reduce(function(e,t){return e.intersect(t)}).map(function(e){return{ref:e,score:l.similarity(this.documentVector(e))}},this).sort(function(e,t){return t.score-e.score})):[]},$.Index.prototype.documentVector=function(e){for(var t=this.documentStore.get(e),o=t.length,n=new $.Vector,i=0;i<o;i++){var r=t.elements[i],s=this.tokenStore.get(r)[e].tf,a=this.idf(r);n.insert(this.corpusTokens.indexOf(r),s*a)}return n},$.Index.prototype.toJSON=function(){return{version:$.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}},$.Index.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},$.Store=function(){this.store={},this.length=0},$.Store.load=function(o){var e=new this;return e.length=o.length,e.store=Object.keys(o.store).reduce(function(e,t){return e[t]=$.SortedSet.load(o.store[t]),e},{}),e},$.Store.prototype.set=function(e,t){this.has(e)||this.length++,this.store[e]=t},$.Store.prototype.get=function(e){return this.store[e]},$.Store.prototype.has=function(e){return e in this.store},$.Store.prototype.remove=function(e){this.has(e)&&(delete this.store[e],this.length--)},$.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}},$.stemmer=(u={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},l={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},e="[aeiouy]",t="[^aeiou][^aeiouy]*",c=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),d=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),p=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$"),f=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy]"),m=/^(.+?)(ss|i)es$/,y=/^(.+?)([^s])s$/,v=/^(.+?)eed$/,g=/^(.+?)(ed|ing)$/,S=/.$/,w=/(at|bl|iz)$/,x=new RegExp("([^aeiouylsz])\\1$"),k=new RegExp("^"+t+e+"[^aeiouwxy]$"),b=/^(.+?[^aeiou])y$/,E=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,_=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,F=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,O=/^(.+?)(s|t)(ion)$/,P=/^(.+?)e$/,N=/ll$/,T=new RegExp("^"+t+e+"[^aeiouwxy]$"),function(e){var t,o,n,i,r,s,a,h;return e.length<3||("y"==(o=e.substr(0,1))&&(e=o.toUpperCase()+e.substr(1)),a=y,(r=m).test(e)?e=e.replace(r,"$1$2"):a.test(e)&&(e=e.replace(a,"$1$2")),a=g,(r=v).test(e)?(h=r.exec(e),(r=c).test(h[1])&&(r=S,e=e.replace(r,""))):a.test(e)&&(s=(h=a.exec(e))[1],(a=f).test(s)&&(n=x,i=k,(a=w).test(e=s)?e+="e":n.test(e)?(r=S,e=e.replace(r,"")):i.test(e)&&(e+="e"))),(r=b).test(e)&&(e=(s=(h=r.exec(e))[1])+"i"),(r=E).test(e)&&(s=(h=r.exec(e))[1],t=h[2],(r=c).test(s)&&(e=s+u[t])),(r=_).test(e)&&(s=(h=r.exec(e))[1],t=h[2],(r=c).test(s)&&(e=s+l[t])),a=O,(r=F).test(e)?(s=(h=r.exec(e))[1],(r=d).test(s)&&(e=s)):a.test(e)&&(s=(h=a.exec(e))[1]+h[2],(a=d).test(s)&&(e=s)),(r=P).test(e)&&(s=(h=r.exec(e))[1],a=p,n=T,((r=d).test(s)||a.test(s)&&!n.test(s))&&(e=s)),a=d,(r=N).test(e)&&a.test(e)&&(r=S,e=e.replace(r,"")),"y"==o&&(e=o.toLowerCase()+e.substr(1))),e}),$.Pipeline.registerFunction($.stemmer,"stemmer"),$.stopWordFilter=function(e){return e&&$.stopWordFilter.stopWords[e]!==e?e:void 0},$.stopWordFilter.stopWords={a:"a",able:"able",about:"about",across:"across",after:"after",all:"all",almost:"almost",also:"also",am:"am",among:"among",an:"an",and:"and",any:"any",are:"are",as:"as",at:"at",be:"be",because:"because",been:"been",but:"but",by:"by",can:"can",cannot:"cannot",could:"could",dear:"dear",did:"did",do:"do",does:"does",either:"either",else:"else",ever:"ever",every:"every",for:"for",from:"from",get:"get",got:"got",had:"had",has:"has",have:"have",he:"he",her:"her",hers:"hers",him:"him",his:"his",how:"how",however:"however",i:"i",if:"if",in:"in",into:"into",is:"is",it:"it",its:"its",just:"just",least:"least",let:"let",like:"like",likely:"likely",may:"may",me:"me",might:"might",most:"most",must:"must",my:"my",neither:"neither",no:"no",nor:"nor",not:"not",of:"of",off:"off",often:"often",on:"on",only:"only",or:"or",other:"other",our:"our",own:"own",rather:"rather",said:"said",say:"say",says:"says",she:"she",should:"should",since:"since",so:"so",some:"some",than:"than",that:"that",the:"the",their:"their",them:"them",then:"then",there:"there",these:"these",they:"they",this:"this",tis:"tis",to:"to",too:"too",twas:"twas",us:"us",wants:"wants",was:"was",we:"we",were:"were",what:"what",when:"when",where:"where",which:"which",while:"while",who:"who",whom:"whom",why:"why",will:"will",with:"with",would:"would",yet:"yet",you:"you",your:"your"},$.Pipeline.registerFunction($.stopWordFilter,"stopWordFilter"),$.trimmer=function(e){e=e.replace(/^\W+/,"").replace(/\W+$/,"");return""===e?void 0:e},$.Pipeline.registerFunction($.trimmer,"trimmer"),$.TokenStore=function(){this.root={docs:{}},this.length=0},$.TokenStore.load=function(e){var t=new this;return t.root=e.root,t.length=e.length,t},$.TokenStore.prototype.add=function(e,t,o){var o=o||this.root,n=e[0],e=e.slice(1);return n in o||(o[n]={docs:{}}),0===e.length?(o[n].docs[t.ref]=t,void(this.length+=1)):this.add(e,t,o[n])},$.TokenStore.prototype.has=function(e){if(!e)return!1;for(var t=this.root,o=0;o<e.length;o++){if(!t[e[o]])return!1;t=t[e[o]]}return!0},$.TokenStore.prototype.getNode=function(e){if(!e)return{};for(var t=this.root,o=0;o<e.length;o++){if(!t[e[o]])return{};t=t[e[o]]}return t},$.TokenStore.prototype.get=function(e,t){return this.getNode(e,t).docs||{}},$.TokenStore.prototype.count=function(e,t){return Object.keys(this.get(e,t)).length},$.TokenStore.prototype.remove=function(e,t){if(e){for(var o=this.root,n=0;n<e.length;n++){if(!(e[n]in o))return;o=o[e[n]]}delete o.docs[t]}},$.TokenStore.prototype.expand=function(t,o){var e=this.getNode(t),n=e.docs||{},o=o||[];return Object.keys(n).length&&o.push(t),Object.keys(e).forEach(function(e){"docs"!==e&&o.concat(this.expand(t+e,o))},this),o},$.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}},t=this,e=function(){return $},"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=$:t.lunr=$}();