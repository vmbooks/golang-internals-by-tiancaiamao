require(["gitbook","jquery"],function(r,s){function n(){this.index=null,this.store={},this.name="LunrSearchEngine"}n.prototype.init=function(){var t=this,n=s.Deferred();return s.getJSON(r.state.basePath+"/search_index.json").then(function(e){t.index=lunr.Index.load(e.index),t.store=e.store,n.resolve()}),n.promise()},n.prototype.search=function(e,t,n){var r=this,i=[];return this.index&&(i=s.map(this.index.search(e),function(e){e=r.store[e.ref];return{title:e.title,url:e.url,body:e.summary||e.body}})),s.Deferred().resolve({query:e,results:i.slice(0,n),count:i.length}).promise()},r.events.bind("start",function(e,t){r.search.getEngine()||r.search.setEngine(n,t)})});